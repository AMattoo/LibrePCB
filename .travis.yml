language: cpp
sudo: required
services:
  - docker
cache:
  directories:
    - $HOME/.ccache
notifications:
  email:
    on_success: change
    on_failure: change

matrix:
  fast_finish: true
  include:
    # Ubuntu 14.04 + GCC 4.8 + Qt 5.2 + Doxygen Generation (all packages from official Ubuntu repositories)
    - os: linux
      dist: trusty
      compiler: gcc
      env: BUILD_DOXYGEN=true DOCKER_IMAGE="librepcb/librepcb:trusty" QMAKE_SPEC="linux-g++"
    # OS X + GCC
    - os: osx
      compiler: gcc
      env: BUILD_DOXYGEN=false
    # OS X + Clang
    - os: osx
      compiler: clang
      env: BUILD_DOXYGEN=false

install:
  - ./dev/travis/install.sh

script:
  - ./dev/travis/build.sh
  - ./dev/travis/run_tests.sh
  - ./dev/travis/update_doxygen.sh

